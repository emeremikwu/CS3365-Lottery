<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/favcon.jpg" type="image/jpeg" />
    <link rel="stylesheet" href="styles/styles.css" />
    <title>Your Basic Website</title>
  </head>

  <body>
    <header>
      <a href="index.html">
        <img src="images/TLlogo.svg" alt="TL Logo" />
      </a>
    </header>

    <div class="gray-bar">
      <nav>
        <a href="browse_tickets.html">Browse Lottery Tickets</a>
        <a href="winning_numbers.html">Winning Numbers</a>
        <a href="profile.html">Profile</a>
        <a href="order_history.html">Order History</a>

        <div class="user-actions">
          <a href="login.html" class="bold">Login</a>
          <span>/</span>
          <a href="registration.html" class="bold">Register</a>
        </div>
        <a href="shoppingcart.html">
          <img
            class="Shopping"
            src="images/shopping-cart.png"
            alt="Shopping Cart"
          />
        </a>
      </nav>
    </div>

    <section>
      <form id="myForm">
        <h2 id="login_header">Login</h2>
        <label for="email">Email:</label>
        <input
          class="login-input"
          type="email"
          id="email"
          name="email"
          required
        />

        <label for="password">Password:</label>
        <input
          class="login-input"
          type="password"
          id="password"
          name="password"
          required
        />

        <button class="login-button" type="button" onclick="login()">Login</button>

        <div class="register-link">
          <p>
            Don't have an account? <a href="registration.html">Register here</a>
          </p>
        </div>
      </form>
    </section>

    <footer>
      <p>
        &copy; 2023 Texas Lottery Purchase System Mock-Up. All Rights Reserved.
      </p>
    </footer>


    <script>
      function login() {
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
    
        // Fetch user_info.json (assuming it's in the same directory)
        fetch('user_info.json')
          .then(response => response.json())
          .then(data => {
            console.log('Fetched data:', data);
    
            // Check if email and password match any user in the fetched data
            var authenticatedUser = data.find(user => user.email === email && user.password === password);
    
            if (authenticatedUser) {
              // Check if the email is Admin@lottery.com
              if (email.toLowerCase() === 'admin@lottery.com') {
                // Redirect to the admin page
                window.location.href = 'adminstatus.html';
              } else {
                // Redirect to the user's profile page or perform other actions
                window.location.href = 'loginedindex.html';
              }
            } else {
              // Authentication failed, show an error message
              alert('Invalid email or password. Please try again.');
            }
          })
          .catch(error => console.error('Error fetching user_info.json:', error));
      }
    </script>
</html>
